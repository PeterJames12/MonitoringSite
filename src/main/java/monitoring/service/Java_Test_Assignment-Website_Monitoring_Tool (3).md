Website Monitoring Tool
=======================

(Тестовое задание на позицию Java-девелопера)

Нужно написать приложение, которое будет мониторить состояние
одного или нескольких внешних веб-приложений путем периодического выкачивания
страниц по заданным УРЛам, и контроля времени ответа серверов, HTTP кода респонса,
размера респонса в некотором заданном диапазоне, и дополнительно (опционально) -
наличие некоторой подстроки в респонсе.

Подобную функциональность включают в себя существующие системы мониторинга серверов,
например, Nagios, Zabbix.

Сервер
------

Серверная часть приложения должна периодически опрашивать все заданные в конфигурации
приложения УРЛы, и отдавать их статус в пользовательский интерфейс.

Пользовательский интерфейс
--------------------------

Пользовательский интерфейс приложения должен состоять из одной HTML страницы,
которая показывает статус всех УРЛов в виде таблицы.

Таблица должна периодически перезагружаться с сервера,
чтобы отображать актуальный статус.

Статус каждого УРЛа может принимать три состояния: OK, WARNING, CRITICAL.

Кроме статуса, в таблицу нужно выводить другие полезные детали о результатах мониторинга УРЛов,
чтобы было легче понять, в чем состоит проблема.  

При статусах WARNING и CRITICAL, страница должна издавать звуковой сигнал
(разный для WARNING и CRITICAL)

Конфигурирация приложения
-------------------------

Конфигурация УРЛов, которые подлежат мониторингу приложением, должна задаваться в виде
отдельных property файлов, по одному файлу на УРЛ.

Для каждого УРЛа, который будет мониториться приложением, задаются такие параметры:

* Период мониторинга

* Время ответа сервера (отдельные пороги для OK, WARNING, CRITICAL)

* Ожидаемый HTTP response code.
  Если сервер возвращает какой-то другой код, статус УРЛа должен быть CRITICAL.

* Ожидаемый диапазон размера респонса в байтах (min и max).
  Если размер контента выходит за пределы допустимого диапазона, статус УРЛа
  должен быть CRITICAL.

* Опционально - подстрока, которая должна содержаться в респонсе.
  Если подстроки нету, статус УРЛа должен быть CRITICAL.

Тесты
-----

В процессе девелопмента, тестируйте отдельные модули с помощью junit- или "ручных"
тестов. При тестировании какого-то модуля, другие модули, от которых зависит этот модуль,
можно заменять заглушками, упрощенно реализующими интерфейсы этих модулей.

После завершения девелопмента тесты не удаляйте, оставьте их в коде.

Детали реализации
-----------------

Приложение нужно реализовать на чистом JDK/J2EE, без использования сторонних библиотек.

Приложение должно быть собрано в виде war файла.
Предоставьте скрипт компиляции и сборки приложения с помощью любого билд-тула,
с которым вы знакомы.

Страницу статуса формирует и отдает в браузер обычный сервлет или jsp.

Используйте любой сервлет-контейнер, с которым вы знакомы.

Несмотря на простоту задачи, приложение следует реализовать максимально объектно -
в виде нескольких модулей, связанных через тонкие интерфейсы. Так, чтобы это приложение
можно было легко расширять и наращивать функциональность в будущем, и чтобы мы могли
оценить ваши навыки в области объектного дизайна.

Примеры возможного расширения функциональности:

* Использование другого пользовательского интерфейса
  (например, native приложения, возможно, через REST Web-API)

* Другой способ конфигурирования приложения, например, отдельный веб-интерфейс конфигурирования
  УРЛов мониторинга, и база данных (вместо property файлов)

* Сохранение результатов мониторинга в базу данных, формирование отчетов за интервалы времени в прошлом
  (периоды проблем, даунтайм)

* Альтернативные способы мониторинга УРЛов, например мониторинг через удаленные прокси-агенты,
  чтобы проверять доступность интересующих нас УРЛов из разных мест в Интернете.

* Временное исключение УРЛа из мониторинга. Например, когда оператор увидел проблему с каким-то УРЛом,
  и уже занимается ее решением, в этом случае можно приостановить сигналы мониторинга.

* Scheduled downtime - приостановить мониторинг, если мы сами останавливаем
  сервис для обслуживания (похоже на предыдущий пункт).

Будет плюсом, если вы заложите какие-то из этих расширений в структуру приложения (без реализации).

Желательно представить UML диаграмму приложения, и, при необходимости, модулей.

Помимо просто работоспособности приложения, мы придаем большое значение аккуратности, стилю кода, 
и хорошему объектному дизайну.


Уровни реализации:
==================

Junior
------

* Консольное приложение, тестирующее один сайт и выводящие результаты в консоль

* Клиент-серверное приложение с веб-интерфейсом в одну страницу,
  тестирующее несколько сайтов с сервера параллельно,

  Результат выдается в виде таблицы на HTML странице (через сервлет или jsp).

  Конфигурация задается в конфигурационных файлах на сервере.


Middle
------

* То же, что и выше, плюс конфигурирование через веб-интерфейс -
  добавление, настройка, удаление УРЛов мониторинга,

  Временное выключение/включение мониторинга УРЛа через веб-интерфейс.

  Конфигурация хранится на сервере в базе данных.

  Здесь вы можете использовать любой web-application framework, с которым вы знакомы,
  т.к. такую функциональность нет смысла пытаться сделать на простых сервлетах.

Senior
------

* То же, что и выше, плюс работа через прокси-агенты на удаленных машинах.

  Это нужно для того, чтобы проверить доступность сайта из разных точек в интернете.

  Центральный сервер, где установлено основное приложение, раздает задачи приложениям-агентам,
  установленным на нескольких удаленных серверах в разных точках интернета, и собирает
  с них результаты мониторинга УРЛов.

  Результатом выполнения этого уровня будет два веб-приложения - основное приложение
  и удаленный агент. Удаленный прокси-агент также может быть консольным приложением.


Инсталляция приложения
======================

Во всех случаях, включающих клиент-серверное приложение, мы предоставим вам вход на Linux-машину
для инасталляции приложения (IP адрес, логин/пароль). Если у вас есть свой тестовый сервер
с уже настроенной инфраструктурой для запуска веб-приложений, можно использовать его.

Туда вам нужно будет установить сервлет контейнер, ваше приложение, и дать нам УРЛ, куда можно
зайти, чтобы посмотреть результат.

Выберите несколько УРЛов мониторинга для примера, добавьте в конфигурацию
приложения, чтобы были какие-то данные для просмотра.


--

Спасибо за интерес к этой вакансии, и желаем вам успеха.

